<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="gasrcds">

  <resultMap class="model.GasRcd" id="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 13 22:16:27 CST 2010.
    -->
    <result column="id" jdbcType="INTEGER" property="id" />
    <result column="fueledTime" jdbcType="TIMESTAMP" property="fueledTime" />
    <result column="timeStamp" jdbcType="TIMESTAMP" property="timeStamp" />
    <result column="totalDistance" jdbcType="INTEGER" property="totalDistance" />
    <result column="lastDistance" jdbcType="SMALLINT" property="lastDistance" />
    <result column="fueledVolum" jdbcType="REAL" property="fueledVolum" />
    <result column="money" jdbcType="REAL" property="money" />
    <result column="isFull" jdbcType="BIT" property="isFull" />
    <result column="LPM" jdbcType="REAL" property="LPM" />
    <result column="place" jdbcType="VARCHAR" property="place" />
    <result column="roadType" jdbcType="VARCHAR" property="roadType" />
    <result column="gasType" jdbcType="VARCHAR" property="gasType" />
    <result column="comment" jdbcType="VARCHAR" property="comment" />
    <result column="userId" jdbcType="INTEGER" property="userId" />
    <result column="lastFueledTime" jdbcType="TIMESTAMP" property="lastFueledTime" />
  </resultMap>
  <sql id="ibatorgenerated_Example_Where_Clause">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 13 22:16:27 CST 2010.
    -->
    <iterate conjunction="or" prepend="where" property="oredCriteria" removeFirstPrepend="iterate">
      <isEqual compareValue="true" property="oredCriteria[].valid">
        (
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithoutValue">
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithSingleValue">
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithListValue">
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate close=")" conjunction="," open="(" property="oredCriteria[].criteriaWithListValue[].values">
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithBetweenValue">
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <select id="ibatorgenerated_selectByExample" parameterClass="model.GasRcdExample" resultMap="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 13 22:16:27 CST 2010.
    -->
    select id, fueledTime, timeStamp, totalDistance, lastDistance, fueledVolum, money, isFull, LPM,
      place, roadType, gasType, comment, userId, lastFueledTime
    from gasrcds
    <isParameterPresent>
      <include refid="gasrcds.ibatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause">
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <select id="ibatorgenerated_selectByPrimaryKey" parameterClass="model.GasRcd" resultMap="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 13 22:16:27 CST 2010.
    -->
    select id, fueledTime, timeStamp, totalDistance, lastDistance, fueledVolum, money, isFull, LPM,
      place, roadType, gasType, comment, userId, lastFueledTime
    from gasrcds
    where id = #id:INTEGER#
  </select>
  <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="model.GasRcd">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 13 22:16:27 CST 2010.
    -->
    delete from gasrcds
    where id = #id:INTEGER#
  </delete>
  <delete id="ibatorgenerated_deleteByExample" parameterClass="model.GasRcdExample">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 13 22:16:27 CST 2010.
    -->
    delete from gasrcds
    <include refid="gasrcds.ibatorgenerated_Example_Where_Clause" />
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="model.GasRcd">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 13 22:16:27 CST 2010.
    -->
    insert into gasrcds (id, fueledTime, timeStamp, totalDistance, lastDistance, fueledVolum, money,
      isFull, LPM, place, roadType, gasType, comment, userId, lastFueledTime)
    values (#id:INTEGER#, #fueledTime:TIMESTAMP#, #timeStamp:TIMESTAMP#, #totalDistance:INTEGER#,
      #lastDistance:SMALLINT#, #fueledVolum:REAL#, #money:REAL#, #isFull:BIT#, #LPM:REAL#,
      #place:VARCHAR#, #roadType:VARCHAR#, #gasType:VARCHAR#, #comment:VARCHAR#, #userId:INTEGER#,
      #lastFueledTime:TIMESTAMP#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="model.GasRcd">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 13 22:16:27 CST 2010.
    -->
    insert into gasrcds
    <dynamic prepend="(">
      <isNotNull prepend="," property="id">
        id
      </isNotNull>
      <isNotNull prepend="," property="fueledTime">
        fueledTime
      </isNotNull>
      <isNotNull prepend="," property="timeStamp">
        timeStamp
      </isNotNull>
      <isNotNull prepend="," property="totalDistance">
        totalDistance
      </isNotNull>
      <isNotNull prepend="," property="lastDistance">
        lastDistance
      </isNotNull>
      <isNotNull prepend="," property="fueledVolum">
        fueledVolum
      </isNotNull>
      <isNotNull prepend="," property="money">
        money
      </isNotNull>
      <isNotNull prepend="," property="isFull">
        isFull
      </isNotNull>
      <isNotNull prepend="," property="LPM">
        LPM
      </isNotNull>
      <isNotNull prepend="," property="place">
        place
      </isNotNull>
      <isNotNull prepend="," property="roadType">
        roadType
      </isNotNull>
      <isNotNull prepend="," property="gasType">
        gasType
      </isNotNull>
      <isNotNull prepend="," property="comment">
        comment
      </isNotNull>
      <isNotNull prepend="," property="userId">
        userId
      </isNotNull>
      <isNotNull prepend="," property="lastFueledTime">
        lastFueledTime
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(">
      <isNotNull prepend="," property="id">
        #id:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="fueledTime">
        #fueledTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="timeStamp">
        #timeStamp:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="totalDistance">
        #totalDistance:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="lastDistance">
        #lastDistance:SMALLINT#
      </isNotNull>
      <isNotNull prepend="," property="fueledVolum">
        #fueledVolum:REAL#
      </isNotNull>
      <isNotNull prepend="," property="money">
        #money:REAL#
      </isNotNull>
      <isNotNull prepend="," property="isFull">
        #isFull:BIT#
      </isNotNull>
      <isNotNull prepend="," property="LPM">
        #LPM:REAL#
      </isNotNull>
      <isNotNull prepend="," property="place">
        #place:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="roadType">
        #roadType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="gasType">
        #gasType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="comment">
        #comment:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="userId">
        #userId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="lastFueledTime">
        #lastFueledTime:TIMESTAMP#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <select id="ibatorgenerated_countByExample" parameterClass="model.GasRcdExample" resultClass="java.lang.Integer">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 13 22:16:27 CST 2010.
    -->
    select count(*) from gasrcds
    <include refid="gasrcds.ibatorgenerated_Example_Where_Clause" />
  </select>
  <update id="ibatorgenerated_updateByExampleSelective">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 13 22:16:27 CST 2010.
    -->
    update gasrcds
    <dynamic prepend="set">
      <isNotNull prepend="," property="record.id">
        id = #record.id:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="record.fueledTime">
        fueledTime = #record.fueledTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="record.timeStamp">
        timeStamp = #record.timeStamp:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="record.totalDistance">
        totalDistance = #record.totalDistance:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="record.lastDistance">
        lastDistance = #record.lastDistance:SMALLINT#
      </isNotNull>
      <isNotNull prepend="," property="record.fueledVolum">
        fueledVolum = #record.fueledVolum:REAL#
      </isNotNull>
      <isNotNull prepend="," property="record.money">
        money = #record.money:REAL#
      </isNotNull>
      <isNotNull prepend="," property="record.isFull">
        isFull = #record.isFull:BIT#
      </isNotNull>
      <isNotNull prepend="," property="record.LPM">
        LPM = #record.LPM:REAL#
      </isNotNull>
      <isNotNull prepend="," property="record.place">
        place = #record.place:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.roadType">
        roadType = #record.roadType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.gasType">
        gasType = #record.gasType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.comment">
        comment = #record.comment:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.userId">
        userId = #record.userId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="record.lastFueledTime">
        lastFueledTime = #record.lastFueledTime:TIMESTAMP#
      </isNotNull>
    </dynamic>
    <isParameterPresent>
      <include refid="gasrcds.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByExample">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 13 22:16:27 CST 2010.
    -->
    update gasrcds
    set id = #record.id:INTEGER#,
      fueledTime = #record.fueledTime:TIMESTAMP#,
      timeStamp = #record.timeStamp:TIMESTAMP#,
      totalDistance = #record.totalDistance:INTEGER#,
      lastDistance = #record.lastDistance:SMALLINT#,
      fueledVolum = #record.fueledVolum:REAL#,
      money = #record.money:REAL#,
      isFull = #record.isFull:BIT#,
      LPM = #record.LPM:REAL#,
      place = #record.place:VARCHAR#,
      roadType = #record.roadType:VARCHAR#,
      gasType = #record.gasType:VARCHAR#,
      comment = #record.comment:VARCHAR#,
      userId = #record.userId:INTEGER#,
      lastFueledTime = #record.lastFueledTime:TIMESTAMP#
    <isParameterPresent>
      <include refid="gasrcds.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="model.GasRcd">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 13 22:16:27 CST 2010.
    -->
    update gasrcds
    <dynamic prepend="set">
      <isNotNull prepend="," property="fueledTime">
        fueledTime = #fueledTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="timeStamp">
        timeStamp = #timeStamp:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="totalDistance">
        totalDistance = #totalDistance:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="lastDistance">
        lastDistance = #lastDistance:SMALLINT#
      </isNotNull>
      <isNotNull prepend="," property="fueledVolum">
        fueledVolum = #fueledVolum:REAL#
      </isNotNull>
      <isNotNull prepend="," property="money">
        money = #money:REAL#
      </isNotNull>
      <isNotNull prepend="," property="isFull">
        isFull = #isFull:BIT#
      </isNotNull>
      <isNotNull prepend="," property="LPM">
        LPM = #LPM:REAL#
      </isNotNull>
      <isNotNull prepend="," property="place">
        place = #place:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="roadType">
        roadType = #roadType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="gasType">
        gasType = #gasType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="comment">
        comment = #comment:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="userId">
        userId = #userId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="lastFueledTime">
        lastFueledTime = #lastFueledTime:TIMESTAMP#
      </isNotNull>
    </dynamic>
    where id = #id:INTEGER#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="model.GasRcd">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Jul 13 22:16:27 CST 2010.
    -->
    update gasrcds
    set fueledTime = #fueledTime:TIMESTAMP#,
      timeStamp = #timeStamp:TIMESTAMP#,
      totalDistance = #totalDistance:INTEGER#,
      lastDistance = #lastDistance:SMALLINT#,
      fueledVolum = #fueledVolum:REAL#,
      money = #money:REAL#,
      isFull = #isFull:BIT#,
      LPM = #LPM:REAL#,
      place = #place:VARCHAR#,
      roadType = #roadType:VARCHAR#,
      gasType = #gasType:VARCHAR#,
      comment = #comment:VARCHAR#,
      userId = #userId:INTEGER#,
      lastFueledTime = #lastFueledTime:TIMESTAMP#
    where id = #id:INTEGER#
  </update>
  
  <select id="getRcdForUserName" parameterClass="java.lang.String" resultMap="ibatorgenerated_BaseResultMap">
  	select a.* from gasrcds a,users b where a.userId=b.id and b.name= #name#
  </select>
  
  <select id="getRcdForUserID" parameterClass="java.lang.Integer" resultMap="ibatorgenerated_BaseResultMap">
  	select a.* from gasrcds a where a.userid= #id# order by timestamp desc
  </select>
  
  <select id="getLastRcdForUserID" parameterClass="java.lang.Integer" resultMap="ibatorgenerated_BaseResultMap">
    select * from gasrcds where id = (SELECT max(id) FROM gasrcds g where userid= #id#)
  </select>
    <delete id="deleteLastRcdsForUserID" parameterClass="java.util.Map" >
  	delete from gasrcds where userid=#userid# and (lpm between #lpm#-0.0001 and #lpm#+0.0001)
  </delete>
</sqlMap>
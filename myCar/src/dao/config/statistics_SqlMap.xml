<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="statistics">
  <resultMap class="model.Report" id="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jul 19 10:24:15 CST 2009.
    -->
    <result column="id" jdbcType="INTEGER" property="id" />
    <result column="totalDistance" jdbcType="INTEGER" property="totalDistance" />
    <result column="totalGas" jdbcType="REAL" property="totalGas" />
    <result column="totalFee" jdbcType="REAL" property="totalFee" />
    <result column="recordedday" jdbcType="SMALLINT" property="recordedday" />
    <result column="avgGasPrice" jdbcType="REAL" property="avgGasPrice" />
    <result column="milesPerDay" jdbcType="INTEGER" property="milesPerDay" />
    <result column="avgLPM" jdbcType="REAL" property="avgLPM" />
    <result column="avgFee" jdbcType="REAL" property="avgFee" />
    <result column="userId" jdbcType="INTEGER" property="userId" />
    <result column="timestamp" jdbcType="TIMESTAMP" property="timestamp" />
    <result column="fueledTime" jdbcType="TIMESTAMP" property="fueledTime" />
  </resultMap>
  <sql id="ibatorgenerated_Example_Where_Clause">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jul 19 10:24:15 CST 2009.
    -->
    <iterate conjunction="or" prepend="where" property="oredCriteria" removeFirstPrepend="iterate">
      <isEqual compareValue="true" property="oredCriteria[].valid">
        (
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithoutValue">
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithSingleValue">
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithListValue">
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate close=")" conjunction="," open="(" property="oredCriteria[].criteriaWithListValue[].values">
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithBetweenValue">
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <select id="ibatorgenerated_selectByExample" parameterClass="model.ReportExample" resultMap="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jul 19 10:24:15 CST 2009.
    -->
    select id, totalDistance, totalGas, totalFee, recordedday, avgGasPrice, milesPerDay, avgLPM,
      avgFee, userId, timestamp, fueledTime
    from statistics
    <isParameterPresent>
      <include refid="statistics.ibatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause">
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <select id="ibatorgenerated_selectByPrimaryKey" parameterClass="model.Report" resultMap="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jul 19 10:24:15 CST 2009.
    -->
    select id, totalDistance, totalGas, totalFee, recordedday, avgGasPrice, milesPerDay, avgLPM,
      avgFee, userId, timestamp, fueledTime
    from statistics
    where id = #id:INTEGER#
  </select>
  <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="model.Report">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jul 19 10:24:15 CST 2009.
    -->
    delete from statistics
    where id = #id:INTEGER#
  </delete>
  <delete id="ibatorgenerated_deleteByExample" parameterClass="model.ReportExample">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jul 19 10:24:15 CST 2009.
    -->
    delete from statistics
    <include refid="statistics.ibatorgenerated_Example_Where_Clause" />
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="model.Report">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jul 19 10:24:15 CST 2009.
    -->
    insert into statistics (id, totalDistance, totalGas, totalFee, recordedday, avgGasPrice,
      milesPerDay, avgLPM, avgFee, userId, timestamp, fueledTime)
    values (#id:INTEGER#, #totalDistance:INTEGER#, #totalGas:REAL#, #totalFee:REAL#,
      #recordedday:SMALLINT#, #avgGasPrice:REAL#, #milesPerDay:INTEGER#, #avgLPM:REAL#,
      #avgFee:REAL#, #userId:INTEGER#, #timestamp:TIMESTAMP#, #fueledTime:TIMESTAMP#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="model.Report">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jul 19 10:24:15 CST 2009.
    -->
    insert into statistics
    <dynamic prepend="(">
      <isNotNull prepend="," property="id">
        id
      </isNotNull>
      <isNotNull prepend="," property="totalDistance">
        totalDistance
      </isNotNull>
      <isNotNull prepend="," property="totalGas">
        totalGas
      </isNotNull>
      <isNotNull prepend="," property="totalFee">
        totalFee
      </isNotNull>
      <isNotNull prepend="," property="recordedday">
        recordedday
      </isNotNull>
      <isNotNull prepend="," property="avgGasPrice">
        avgGasPrice
      </isNotNull>
      <isNotNull prepend="," property="milesPerDay">
        milesPerDay
      </isNotNull>
      <isNotNull prepend="," property="avgLPM">
        avgLPM
      </isNotNull>
      <isNotNull prepend="," property="avgFee">
        avgFee
      </isNotNull>
      <isNotNull prepend="," property="userId">
        userId
      </isNotNull>
      <isNotNull prepend="," property="timestamp">
        timestamp
      </isNotNull>
      <isNotNull prepend="," property="fueledTime">
        fueledTime
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(">
      <isNotNull prepend="," property="id">
        #id:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="totalDistance">
        #totalDistance:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="totalGas">
        #totalGas:REAL#
      </isNotNull>
      <isNotNull prepend="," property="totalFee">
        #totalFee:REAL#
      </isNotNull>
      <isNotNull prepend="," property="recordedday">
        #recordedday:SMALLINT#
      </isNotNull>
      <isNotNull prepend="," property="avgGasPrice">
        #avgGasPrice:REAL#
      </isNotNull>
      <isNotNull prepend="," property="milesPerDay">
        #milesPerDay:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="avgLPM">
        #avgLPM:REAL#
      </isNotNull>
      <isNotNull prepend="," property="avgFee">
        #avgFee:REAL#
      </isNotNull>
      <isNotNull prepend="," property="userId">
        #userId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="timestamp">
        #timestamp:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="fueledTime">
        #fueledTime:TIMESTAMP#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <select id="ibatorgenerated_countByExample" parameterClass="model.ReportExample" resultClass="java.lang.Integer">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jul 19 10:24:15 CST 2009.
    -->
    select count(*) from statistics
    <include refid="statistics.ibatorgenerated_Example_Where_Clause" />
  </select>
  <update id="ibatorgenerated_updateByExampleSelective">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jul 19 10:24:15 CST 2009.
    -->
    update statistics
    <dynamic prepend="set">
      <isNotNull prepend="," property="record.id">
        id = #record.id:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="record.totalDistance">
        totalDistance = #record.totalDistance:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="record.totalGas">
        totalGas = #record.totalGas:REAL#
      </isNotNull>
      <isNotNull prepend="," property="record.totalFee">
        totalFee = #record.totalFee:REAL#
      </isNotNull>
      <isNotNull prepend="," property="record.recordedday">
        recordedday = #record.recordedday:SMALLINT#
      </isNotNull>
      <isNotNull prepend="," property="record.avgGasPrice">
        avgGasPrice = #record.avgGasPrice:REAL#
      </isNotNull>
      <isNotNull prepend="," property="record.milesPerDay">
        milesPerDay = #record.milesPerDay:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="record.avgLPM">
        avgLPM = #record.avgLPM:REAL#
      </isNotNull>
      <isNotNull prepend="," property="record.avgFee">
        avgFee = #record.avgFee:REAL#
      </isNotNull>
      <isNotNull prepend="," property="record.userId">
        userId = #record.userId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="record.timestamp">
        timestamp = #record.timestamp:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="record.fueledTime">
        fueledTime = #record.fueledTime:TIMESTAMP#
      </isNotNull>
    </dynamic>
    <isParameterPresent>
      <include refid="statistics.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByExample">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jul 19 10:24:15 CST 2009.
    -->
    update statistics
    set id = #record.id:INTEGER#,
      totalDistance = #record.totalDistance:INTEGER#,
      totalGas = #record.totalGas:REAL#,
      totalFee = #record.totalFee:REAL#,
      recordedday = #record.recordedday:SMALLINT#,
      avgGasPrice = #record.avgGasPrice:REAL#,
      milesPerDay = #record.milesPerDay:INTEGER#,
      avgLPM = #record.avgLPM:REAL#,
      avgFee = #record.avgFee:REAL#,
      userId = #record.userId:INTEGER#,
      timestamp = #record.timestamp:TIMESTAMP#,
      fueledTime = #record.fueledTime:TIMESTAMP#
    <isParameterPresent>
      <include refid="statistics.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="model.Report">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jul 19 10:24:15 CST 2009.
    -->
    update statistics
    <dynamic prepend="set">
      <isNotNull prepend="," property="totalDistance">
        totalDistance = #totalDistance:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="totalGas">
        totalGas = #totalGas:REAL#
      </isNotNull>
      <isNotNull prepend="," property="totalFee">
        totalFee = #totalFee:REAL#
      </isNotNull>
      <isNotNull prepend="," property="recordedday">
        recordedday = #recordedday:SMALLINT#
      </isNotNull>
      <isNotNull prepend="," property="avgGasPrice">
        avgGasPrice = #avgGasPrice:REAL#
      </isNotNull>
      <isNotNull prepend="," property="milesPerDay">
        milesPerDay = #milesPerDay:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="avgLPM">
        avgLPM = #avgLPM:REAL#
      </isNotNull>
      <isNotNull prepend="," property="avgFee">
        avgFee = #avgFee:REAL#
      </isNotNull>
      <isNotNull prepend="," property="userId">
        userId = #userId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="timestamp">
        timestamp = #timestamp:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="fueledTime">
        fueledTime = #fueledTime:TIMESTAMP#
      </isNotNull>
    </dynamic>
    where id = #id:INTEGER#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="model.Report">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jul 19 10:24:15 CST 2009.
    -->
    update statistics
    set totalDistance = #totalDistance:INTEGER#,
      totalGas = #totalGas:REAL#,
      totalFee = #totalFee:REAL#,
      recordedday = #recordedday:SMALLINT#,
      avgGasPrice = #avgGasPrice:REAL#,
      milesPerDay = #milesPerDay:INTEGER#,
      avgLPM = #avgLPM:REAL#,
      avgFee = #avgFee:REAL#,
      userId = #userId:INTEGER#,
      timestamp = #timestamp:TIMESTAMP#,
      fueledTime = #fueledTime:TIMESTAMP#
    where id = #id:INTEGER#
  </update>
  
  <select id="getLastReportForUserID" parameterClass="java.lang.Integer" resultMap="ibatorgenerated_BaseResultMap">
    SELECT * FROM statistics where id = (SELECT max(id) FROM statistics s where userid=#id#)
  </select>
  
  <delete id="deleteLastReportForUserID" parameterClass="java.lang.Integer" >
  	delete from statistics where userid=#id# order by id desc limit 1
  </delete>
  
  
</sqlMap>